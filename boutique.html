<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boutique - Normandie RP</title>
  <link rel="stylesheet" href="style.css">

  <style>
    /* STYLE DES CAGES */
    .logo-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .logo-box {
      width: 150px;
      background: #1b1b1b;
      border-radius: 15px;
      border: 2px solid #444;
      padding: 10px;
      text-align: center;
      transition: 0.3s;
    }

    .logo-box:hover {
      transform: scale(1.05);
      border-color: #6a9eff;
    }

    .logo-price {
      font-size: 16px;
      font-weight: bold;
      color: #00ff7f;
      margin-bottom: 5px;
    }

    .logo-box img {
      width: 100%;
      height: 150px;
      object-fit: contain;
      border-radius: 10px;
      background: #0f0f0f;
    }

    .logo-title {
      margin-top: 5px;
      font-size: 16px;
      font-weight: bold;
      color: white;
    }

    /* STYLE DU BOUTON ACHETER */
    .buy-btn {
      margin-top: 8px;
      display: inline-block;
      background: #6a9eff;
      padding: 8px 15px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: bold;
      color: #000;
      transition: 0.3s;
      cursor: pointer;
    }

    .buy-btn:hover {
      background: #8ab4ff;
      transform: scale(1.05);
    }

    /* STYLE PANIER */
    #cart {
      position: fixed;
      right: 20px;
      top: 60px;
      width: 300px;
      background: #1b1b1b;
      border: 2px solid #444;
      border-radius: 15px;
      padding: 15px;
      color: #fff;
      display: none;
      z-index: 1000;
    }

    #cart.show { display: block; }

    #cart h2 { margin-bottom: 10px; color: #f4c542; }
    #cart ul { list-style: none; padding-left: 0; max-height: 300px; overflow-y: auto; margin-bottom: 10px; }
    #cart ul li { margin-bottom: 5px; }
    #cart button { background: #f4c542; border: none; padding: 10px; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; }
    #cart button:hover { background: #ffd75e; }

    /* BOUTON VOIR LE PANIER */
    #show-cart-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 15px;
      background:#f4c542;
      border:none;
      border-radius:10px;
      font-weight:bold;
      cursor:pointer;
      z-index: 1001;
      transition: 0.3s;
    }
    #show-cart-btn:hover { background: #ffd75e; }

    /* CHAMP PSEUDO */
    #username-field {
      display: block;
      margin: 20px auto;
      text-align: center;
    }
    #username-field input {
      padding: 8px;
      border-radius: 10px;
      border: 2px solid #444;
      width: 200px;
      text-align: center;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="nav-left">
        <img src="logo.png" alt="Logo Normandie RP" class="nav-logo">
        <span class="logo-text">Normandie RP</span>
      </div>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="reglement.html">R√®glement</a></li>
        <li><a href="whitelist.html">Whitelist</a></li>
        <li><a href="jobs.html">M√©tiers</a></li>
        <li><a href="boutique.html" class="active">Boutique</a></li>
      </ul>
    </nav>
  </header>

  <!-- CHAMP PSEUDO -->
  <div id="username-field">
    <label for="username">Entrez votre pseudo : </label>
    <input type="text" id="username" placeholder="Votre pseudo">
  </div>

  <!-- BOUTON VOIR LE PANIER -->
  <button id="show-cart-btn" onclick="document.getElementById('cart').classList.toggle('show')">Voir le panier</button>

  <main class="rules">
    <h1 style="text-align:center;">üõí Boutique en cours de construction</h1>
    <p style="text-align:center;">Voici les premiers emplacements pour les logos :</p>

    <!-- ARTICLES K‚Ç¨ -->
    <div class="logo-container">
      <div class="logo-box">
        <div class="logo-price">indisponible</div>
        <img src="10.000k.png" alt="Logo 1">
        <a class="buy-btn" onclick="addToCart('10K', '10.000k.png', 'indisponible')">Acheter</a>
      </div>
      <div class="logo-box">
        <div class="logo-price">indisponible</div>
        <img src="50.000k.png" alt="Logo 2">
        <a class="buy-btn" onclick="addToCart('50K', '50.000k.png', 'indisponible')">Acheter</a>
      </div>
      <div class="logo-box">
        <div class="logo-price">indisponible</div>
        <img src="100.000k.png" alt="Logo 3">
        <a class="buy-btn" onclick="addToCart('100K', '100.000k.png', 'indisponible')">Acheter</a>
      </div>
    </div>

    <h1 style="text-align:center; margin-top:40px;">‚≠ê Zones VIP</h1>

    <!-- ARTICLES VIP -->
    <div class="logo-container">
      <div class="logo-box">
        <div class="logo-price" style="color:#cd7f32;">indisponible</div>
        <img src="vip-bronze.png" alt="VIP Bronze">
        <div class="logo-title">VIP Bronze</div>
        <a class="buy-btn" onclick="addToCart('VIP Bronze', 'vip-bronze.png', 'indisponible')">Acheter</a>
      </div>
      <div class="logo-box">
        <div class="logo-price" style="color:#c0c0c0;">indisponible</div>
        <img src="vip-argent.png" alt="VIP Argent">
        <div class="logo-title">VIP Argent</div>
        <a class="buy-btn" onclick="addToCart('VIP Argent', 'vip-argent.png', 'indisponible')">Acheter</a>
      </div>
      <div class="logo-box">
        <div class="logo-price" style="color:gold;">indisponible</div>
        <img src="vip-or.png" alt="VIP Or">
        <div class="logo-title">VIP Or</div>
        <a class="buy-btn" onclick="addToCart('VIP Or', 'vip-or.png', 'indisponible')">Acheter</a>
      </div>
    </div>

  </main>

  <!-- PANIER -->
  <div id="cart">
    <h2>üõí Panier</h2>
    <ul id="cart-items"></ul>
    <p>Total : <span id="cart-total">0</span> ‚Ç¨</p>
    <button onclick="checkout()">Proc√©der au paiement</button>
  </div>

  <footer>
    <p>¬© 2025 Normandie RP ‚Äî Tous droits r√©serv√©s</p>
  </footer>

  <script>
    const WEBHOOK_URL = "https://discord.com/api/webhooks/1444488116483391599/DDaOnl7TTtwQQUuwbeZgFEPqLfEYDDUh2zxQSBU4daeNikbkSRWguhBn8w2d9OUrS5tm";
    const STAFF_ROLE_ID = "1424110584424828997"; // r√¥le Staff

    let cart = [];
    let total = 0;

    function addToCart(name, image, price) {
      const usernameInput = document.getElementById('username').value;
      if (!usernameInput) {
        alert("Veuillez entrer votre pseudo avant d'acheter !");
        return;
      }

      cart.push({name, image, price});
      updateCart();
      sendToDiscord(usernameInput, name, price);
    }

    function updateCart() {
      const cartItems = document.getElementById('cart-items');
      cartItems.innerHTML = '';
      total = 0;
      cart.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `${item.name} - ${item.price}`;
        cartItems.appendChild(li);
      });
      document.getElementById('cart-total').innerText = total;
    }

    function checkout() {
      alert("Proc√©der au paiement !");
    }

    function sendToDiscord(username, product, price) {
      const payload = {
        content: `<@&${STAFF_ROLE_ID}> üì¶ **Nouvel achat !**\nUtilisateur : ${username}\nProduit : ${product}\nPrix : ${price}`
      };

      fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      })
      .then(res => {
        if(res.ok) console.log("Message envoy√© sur Discord et ping Staff !");
        else console.error("Erreur lors de l'envoi sur Discord");
      })
      .catch(err => console.error("Erreur fetch Discord :", err));
    }
  </script>
</body>
</html>
